{"version":3,"sources":["webpack:///webpack/bootstrap a45a6f0fa68ec6269f7c","webpack:///./node_modules/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js","webpack:///external \"koa-router\"","webpack:///./server/index.js","webpack:///external \"regenerator-runtime\"","webpack:///./nuxt.config.js","webpack:///external \"koa\"","webpack:///external \"nuxt\"","webpack:///external \"koa-session2\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-logger\"","webpack:///./server/routers/index.js","webpack:///./server/controller/user.js","webpack:///./server/config/index.js","webpack:///external \"@koa/cors\"","webpack:///external \"koa-static\"","webpack:///external \"path\""],"names":["app","host","process","env","HOST","port","PORT","use","session","key","overwrite","koaLogger","koaStatic","path","join","__dirname","cors","bodyParser","router","route","routes","allowedMethods","config","require","dev","nuxt","builder","build","ctx","next","status","req","Promise","resolve","reject","res","on","render","promise","then","catch","listen","console","log","start","module","exports","head","title","meta","charset","hid","name","content","link","rel","type","href","css","src","plugins","ssr","loading","NODE_ENV","cache","max","maxAge","middleware","vendor","extend","isClient","get","post","userinfo","token","user","body","ret","msg","data","login","request","mobile","psd","signkey","sign_key","info","id","sex","role_id","depart_id","deader_id","code","message","logout","base_url"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a45a6f0fa68ec6269f7c","module.exports = require(\"regenerator-runtime\");\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_babel-runtime@6.26.0@babel-runtime/regenerator/index.js\n// module id = 0\n// module chunks = 0","module.exports = require(\"koa-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-router\"\n// module id = 1\n// module chunks = 0","import Koa from 'koa'\nimport { Nuxt, Builder } from 'nuxt'\nimport session from 'koa-session2'\nimport bodyParser from 'koa-bodyparser'\nimport Router from 'koa-router'\nimport koaLogger from 'koa-logger'\nimport route from './routers'\nimport cors from '@koa/cors'\nimport koaStatic from 'koa-static'\nimport path from 'path'\n\nasync function start() {\n  const app = new Koa()\n  const host = process.env.HOST || '127.0.0.1'\n  const port = process.env.PORT || 8808\n\n  // session必须在路由前注册\n  app.use(\n    session({\n      key: '12345',\n      overwrite: true\n    })\n  )\n  // 配置控制台日志中间件\n  app.use(koaLogger())\n\n  // 配置静态资源加载中间件\n  app.use(koaStatic(path.join(__dirname, './src')))\n\n  app.use(cors())\n  app.use(bodyParser())\n\n  const router = new Router()\n  router.use('', route.routes())\n  app.use(router.routes()).use(router.allowedMethods())\n\n  // Import and Set Nuxt.js options\n  let config = require('../nuxt.config.js')\n  // 由于涉及到三个环境变化，使用在test，production 时候，为false\n  config.dev = !(app.env === 'production' || app.env === 'test')\n  // console.log('env === ', app.env, env, process.env.COOKIE_DOMAIN, process.env.APP_ENV, config.dev)\n\n  // Instantiate nuxt.js\n  const nuxt = new Nuxt(config)\n\n  // Build in development\n  if (config.dev) {\n    const builder = new Builder(nuxt)\n    await builder.build()\n  }\n\n  app.use(async (ctx, next) => {\n    await next()\n    ctx.status = 200 // koa defaults to 404 when it sees that status is unset\n    ctx.req.session = ctx.session // 必须将session添加进request中，否则nuxt的req获取不到session\n    return new Promise((resolve, reject) => {\n      ctx.res.on('close', resolve)\n      ctx.res.on('finish', resolve)\n      nuxt.render(ctx.req, ctx.res, promise => {\n        // nuxt.render passes a rejected promise into callback on error.\n        promise.then(resolve).catch(reject)\n      })\n    })\n  })\n\n  app.listen(port, host)\n  console.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n}\n\nstart()\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"regenerator-runtime\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"regenerator-runtime\"\n// module id = 3\n// module chunks = 0","module.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'nuxt-temp',\n    meta: [\n      { charset: 'utf-8' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' },\n      { rel: 'stylesheet', name: 'iview', href: '/styles/iview.css' },\n      { rel: 'stylesheet', name: 'theme', href: '' }\n    ]\n  },\n  css: [\n    { src: '~assets/css/main.css' }\n    // { src: 'iview/dist/styles/iview.css' }\n  ],\n  plugins: [\n    { src: '~plugins/flexible.js', ssr: false },\n    { src: '~plugins/iview.js', ssr: true }\n  ],\n  loading: './components/loading.vue',\n  env: {\n    NODE_ENV: process.env.NODE_ENV\n  },\n  cache: {\n    max: 1000,\n    maxAge: 900000\n  },\n  router: {\n    middleware: 'route' // 在每页渲染前运行 middleware/route.js 中间件的逻辑\n  },\n  build: {\n    vendor: ['axios', 'iview', './plugins/iview.js'],\n    extend(config, ctx) {\n      if (ctx.isClient) {\n        // config.module.rules.push({\n        //   enforce: 'pre',\n        //   test: /\\.(js|vue)$/,\n        //   loader: 'eslint-loader',\n        //   exclude: /(node_modules)/\n        // })\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","module.exports = require(\"koa\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"koa-session2\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-session2\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"koa-bodyparser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-bodyparser\"\n// module id = 8\n// module chunks = 0","module.exports = require(\"koa-logger\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-logger\"\n// module id = 9\n// module chunks = 0","import Router from 'koa-router'\nimport { userinfo, login, logout } from '../controller/user'\nconst router = new Router()\n\nrouter.get('/api/user/getUserInfo', userinfo)\nrouter.post('/api/user/login', login)\nrouter.post('/api/user/logout', logout)\nrouter.get('/api/user/logout', logout)\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/routers/index.js","// import axios from 'axios'\nimport config from '../config'\n\nexport const userinfo = async (ctx, next) => {\n  let token = ctx.session.user.token || ''\n  return (ctx.body = {\n    ret: 200,\n    msg: '获取成功',\n    data: { token: token }\n  })\n}\n\nexport const login = async (ctx, next) => {\n  const { mobile, psd } = ctx.request.body\n  if (!mobile || !psd) {\n    return (ctx.body = {\n      ret: 303,\n      msg: '缺少请求参数',\n      data: {}\n    })\n  }\n\n  // 登陆成功\n  let token = \"token001\";\n  let signkey = config.sign_key\n\n  let info = {\n    id: \"admin\",\n    mobile: \"18910806782\",\n    name: \"zhangsan\",\n    sex: \"男\",\n    status: \"\",\n    role_id: \"admin\",\n    depart_id: \"ss\",\n    deader_id: \"dd\"\n  }\n\n  let session = ctx.session\n  session.user = {\n    token: token,\n    sign_key: signkey,\n    info: info\n  }\n  ctx.session = session\n\n  return (ctx.body = {\n    ret: 200,\n    msg: '请求成功',\n    data: {\n      code: 0,\n      message: '登录成功',\n      token: token,\n      info: info\n    }\n  })\n}\n\nexport const logout = async (ctx, next) => {\n  try {\n    ctx.session.user = null\n    return (ctx.body = {\n      ret: 200,\n      msg: '请求成功',\n      data: {\n        code: 0,\n        message: '退出成功'\n      }\n    })\n  } catch (e) {\n    return (ctx.body = {\n      ret: 200,\n      msg: '请求成功',\n      data: {\n        code: -1,\n        message: '退出失败'\n      }\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/controller/user.js","const config = {\n  base_url: 'http://www.dashuntech.com',\n  sign_key: 'RFHIJUGVCFTRQKJMJKNHGBIOJUHGBNFG'\n}\n\nexport default config\n\n\n\n// WEBPACK FOOTER //\n// ./server/config/index.js","module.exports = require(\"@koa/cors\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@koa/cors\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"koa-static\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"koa-static\"\n// module id = 14\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 15\n// module chunks = 0"],"sourceRoot":""}